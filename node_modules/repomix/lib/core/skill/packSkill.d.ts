import type { RepomixConfigMerged } from '../../config/configSchema.js';
import type { RepomixProgressCallback } from '../../shared/types.js';
import type { SkippedFileInfo } from '../file/fileCollect.js';
import type { ProcessedFile } from '../file/fileTypes.js';
import type { GitDiffResult } from '../git/gitDiffHandle.js';
import type { GitLogResult } from '../git/gitLogHandle.js';
import type { PackOptions, PackResult } from '../packager.js';
import type { SuspiciousFileResult } from '../security/securityCheck.js';
/**
 * References for skill output - each becomes a separate file
 */
export interface SkillReferences {
    summary: string;
    structure: string;
    files: string;
    techStack?: string;
}
/**
 * Result of skill references generation (without SKILL.md)
 */
export interface SkillReferencesResult {
    references: SkillReferences;
    skillName: string;
    projectName: string;
    skillDescription: string;
    totalFiles: number;
    totalLines: number;
    statisticsSection: string;
    hasTechStack: boolean;
    sourceUrl?: string;
}
/**
 * Result of skill output generation
 */
export interface SkillOutputResult {
    skillMd: string;
    references: SkillReferences;
}
/**
 * Generates skill reference files (summary, structure, files, tech-stack).
 * This is the first step - call this, calculate metrics, then call generateSkillMdFromReferences.
 */
export declare const generateSkillReferences: (skillName: string, rootDirs: string[], config: RepomixConfigMerged, processedFiles: ProcessedFile[], allFilePaths: string[], gitDiffResult?: GitDiffResult | undefined, gitLogResult?: GitLogResult | undefined, skillProjectName?: string, skillSourceUrl?: string, deps?: {
    buildOutputGeneratorContext: (rootDirs: string[], config: RepomixConfigMerged, allFilePaths: string[], processedFiles: ProcessedFile[], gitDiffResult?: GitDiffResult | undefined, gitLogResult?: GitLogResult | undefined, filePathsByRoot?: import("../file/fileTreeGenerate.js").FilesByRoot[], deps?: {
        listDirectories: (rootDir: string, config: RepomixConfigMerged) => Promise<string[]>;
        listFiles: (rootDir: string, config: RepomixConfigMerged) => Promise<string[]>;
        searchFiles: (rootDir: string, config: RepomixConfigMerged, explicitFiles?: string[]) => Promise<import("../file/fileSearch.js").FileSearchResult>;
    }) => Promise<import("../output/outputGeneratorTypes.js").OutputGeneratorContext>;
    sortOutputFiles: (files: ProcessedFile[], config: RepomixConfigMerged, deps?: import("../output/outputSort.js").SortDeps) => Promise<ProcessedFile[]>;
}) => Promise<SkillReferencesResult>;
/**
 * Generates SKILL.md content from references result and token count.
 * This is the second step - call after calculating metrics.
 */
export declare const generateSkillMdFromReferences: (referencesResult: SkillReferencesResult, totalTokens: number) => SkillOutputResult;
export interface PackSkillParams {
    rootDirs: string[];
    config: RepomixConfigMerged;
    options: PackOptions;
    processedFiles: ProcessedFile[];
    allFilePaths: string[];
    gitDiffResult: GitDiffResult | undefined;
    gitLogResult: GitLogResult | undefined;
    suspiciousFilesResults: SuspiciousFileResult[];
    suspiciousGitDiffResults: SuspiciousFileResult[];
    suspiciousGitLogResults: SuspiciousFileResult[];
    safeFilePaths: string[];
    skippedFiles: SkippedFileInfo[];
    progressCallback: RepomixProgressCallback;
}
/**
 * Generates skill output (SKILL.md and reference files).
 * This is called from packager.ts when skill generation is requested.
 */
export declare const packSkill: (params: PackSkillParams, deps?: {
    buildOutputGeneratorContext: (rootDirs: string[], config: RepomixConfigMerged, allFilePaths: string[], processedFiles: ProcessedFile[], gitDiffResult?: GitDiffResult | undefined, gitLogResult?: GitLogResult | undefined, filePathsByRoot?: import("../file/fileTreeGenerate.js").FilesByRoot[], deps?: {
        listDirectories: (rootDir: string, config: RepomixConfigMerged) => Promise<string[]>;
        listFiles: (rootDir: string, config: RepomixConfigMerged) => Promise<string[]>;
        searchFiles: (rootDir: string, config: RepomixConfigMerged, explicitFiles?: string[]) => Promise<import("../file/fileSearch.js").FileSearchResult>;
    }) => Promise<import("../output/outputGeneratorTypes.js").OutputGeneratorContext>;
    sortOutputFiles: (files: ProcessedFile[], config: RepomixConfigMerged, deps?: import("../output/outputSort.js").SortDeps) => Promise<ProcessedFile[]>;
    calculateMetrics: (processedFiles: ProcessedFile[], output: string | string[], progressCallback: RepomixProgressCallback, config: RepomixConfigMerged, gitDiffResult: GitDiffResult | undefined, gitLogResult: GitLogResult | undefined, deps?: {
        calculateSelectiveFileMetrics: (processedFiles: ProcessedFile[], targetFilePaths: string[], tokenCounterEncoding: import("tiktoken").TiktokenEncoding, progressCallback: RepomixProgressCallback, deps: {
            taskRunner: import("../../shared/processConcurrency.js").TaskRunner<import("../metrics/workers/calculateMetricsWorker.js").TokenCountTask, number>;
        }) => Promise<import("../metrics/workers/types.js").FileMetrics[]>;
        calculateOutputMetrics: (content: string, encoding: import("tiktoken").TiktokenEncoding, path: string | undefined, deps: {
            taskRunner: import("../../shared/processConcurrency.js").TaskRunner<import("../metrics/workers/calculateMetricsWorker.js").TokenCountTask, number>;
        }) => Promise<number>;
        calculateGitDiffMetrics: (config: RepomixConfigMerged, gitDiffResult: GitDiffResult | undefined, deps: {
            taskRunner: import("../../shared/processConcurrency.js").TaskRunner<import("../metrics/workers/calculateMetricsWorker.js").TokenCountTask, number>;
        }) => Promise<number>;
        calculateGitLogMetrics: (config: RepomixConfigMerged, gitLogResult: GitLogResult | undefined, deps: {
            taskRunner: import("../../shared/processConcurrency.js").TaskRunner<import("../metrics/workers/calculateMetricsWorker.js").TokenCountTask, number>;
        }) => Promise<{
            gitLogTokenCount: number;
        }>;
        taskRunner: import("../../shared/processConcurrency.js").TaskRunner<import("../metrics/workers/calculateMetricsWorker.js").TokenCountTask, number> | undefined;
    }) => Promise<import("../metrics/calculateMetrics.js").CalculateMetricsResult>;
    writeSkillOutput: (output: SkillOutputResult, skillDir: string, deps?: {
        mkdir: typeof import("fs/promises").mkdir;
        writeFile: typeof import("fs/promises").writeFile;
    }) => Promise<string>;
    generateDefaultSkillName: (rootDirs: string[]) => string;
}) => Promise<PackResult>;
//# sourceMappingURL=packSkill.d.ts.map